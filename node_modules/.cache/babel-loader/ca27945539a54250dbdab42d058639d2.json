{"ast":null,"code":"var _jsxFileName = \"/home/just_a_random_person_to_ignore/React-JS-Student-Management-System-Frontend/src/components/student/StudentList.js\";\nimport React, { Component } from 'react';\nimport { connect } from \"react-redux\";\nimport { getAllStudents } from \"../../actions/studentActions\";\nimport StudentItem from \"./StudentItem\";\nimport { Link } from \"react-router-dom\";\nimport { userGetter } from \"../../utils/userGetter\";\nimport paginate from \"../../utils/paginate\";\nimport Pagination from \"../partial/Pagination\";\n\nclass StudentList extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      currentPage: 1,\n      searched_name: \"\"\n    };\n\n    this.changeCurrentPage = pageNum => {\n      this.setState({\n        currentPage: pageNum\n      });\n    };\n\n    this.onChange = e => {\n      this.setState({\n        [e.target.id]: e.target.value\n      });\n    };\n  }\n\n  async componentDidMount() {\n    let user_id = localStorage.getItem(\"user_id\");\n    let user = await userGetter(user_id);\n\n    if (user == null || user.role != \"admin\") {\n      this.props.history.push(\"/\");\n    }\n\n    if (user.role == \"student\") {\n      this.props.history.push(`/students/details/${user_id}`);\n    }\n\n    if (user.role == \"teacher\") {\n      this.props.history.push(`/teachers/details/${user_id}`);\n    }\n\n    this.props.getAllStudents();\n  }\n\n  render() {\n    const {\n      currentPage,\n      searched_name\n    } = this.state;\n    let studentList = this.props.students;\n    const {\n      onChange\n    } = this;\n\n    if (searched_name) {\n      studentList = studentList.filter(item => {\n        return item.name.toLowerCase().includes(searched_name.toLowerCase());\n      });\n    }\n\n    const pageObject = paginate(studentList.length, currentPage, 6, 5);\n    const currentStudentList = studentList.slice(pageObject.startIndex, pageObject.endIndex + 1);\n    const studentItems = currentStudentList.map(studentItem => {\n      return /*#__PURE__*/React.createElement(StudentItem, {\n        key: studentItem._id,\n        studentItem: studentItem,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 64,\n          columnNumber: 20\n        }\n      });\n    });\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Link, {\n      to: \"/students/add\",\n      className: \"btn btn-primary\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 17\n      }\n    }, \"Add Student\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"search-container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"form\", {\n      onSubmit: e => {\n        e.preventDefault();\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"input-group mb-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"input-group-prepend\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      className: \"input-group-text\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 33\n      }\n    }, \"Student Name\")), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      className: \"form-control\",\n      placeholder: \"Student Name\",\n      id: \"searched_name\",\n      name: \"searched_name\",\n      value: searched_name,\n      onChange: onChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 33\n      }\n    })))), /*#__PURE__*/React.createElement(\"ul\", {\n      className: \"list-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 17\n      }\n    }, studentItems), /*#__PURE__*/React.createElement(Pagination, {\n      pageObject: pageObject,\n      changeCurrentPage: this.changeCurrentPage,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 17\n      }\n    }));\n  }\n\n}\n\nconst mapStateToProps = state => {\n  return {\n    students: state.studentReducer.students\n  };\n};\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    getAllStudents: () => {\n      dispatch(getAllStudents());\n    }\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(StudentList);","map":{"version":3,"sources":["/home/just_a_random_person_to_ignore/React-JS-Student-Management-System-Frontend/src/components/student/StudentList.js"],"names":["React","Component","connect","getAllStudents","StudentItem","Link","userGetter","paginate","Pagination","StudentList","state","currentPage","searched_name","changeCurrentPage","pageNum","setState","onChange","e","target","id","value","componentDidMount","user_id","localStorage","getItem","user","role","props","history","push","render","studentList","students","filter","item","name","toLowerCase","includes","pageObject","length","currentStudentList","slice","startIndex","endIndex","studentItems","map","studentItem","_id","preventDefault","mapStateToProps","studentReducer","mapDispatchToProps","dispatch"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport {connect} from \"react-redux\";\nimport {getAllStudents} from \"../../actions/studentActions\";\nimport StudentItem from \"./StudentItem\";\nimport {Link} from \"react-router-dom\";\nimport {userGetter} from \"../../utils/userGetter\";\nimport paginate from \"../../utils/paginate\";\nimport Pagination from \"../partial/Pagination\";\n\nclass StudentList extends Component {\n\n    state = {\n        currentPage: 1,\n        searched_name: \"\"\n    }\n\n    async componentDidMount(){\n        let user_id = localStorage.getItem(\"user_id\");\n        let user = await userGetter(user_id)\n\n        if (user == null || user.role != \"admin\"){\n            this.props.history.push(\"/\");\n        }\n\n        if (user.role == \"student\") {\n            this.props.history.push(`/students/details/${user_id}`);\n        }\n\n        if (user.role == \"teacher\") {\n            this.props.history.push(`/teachers/details/${user_id}`);\n        }\n\n        this.props.getAllStudents()\n    }\n\n    changeCurrentPage = (pageNum) => {\n        this.setState({\n            currentPage: pageNum\n        })\n    }\n\n    onChange = (e) => {\n        this.setState({\n            [e.target.id]: e.target.value\n        })\n    }\n\n    render() {\n        const {currentPage, searched_name} = this.state;\n        let studentList = this.props.students;\n        const {onChange} = this;\n\n        if (searched_name){\n            studentList = studentList.filter(item => {\n                return item.name.toLowerCase().includes(searched_name.toLowerCase())\n            })\n        }\n\n        const pageObject = paginate(studentList.length, currentPage, 6, 5)\n\n        const currentStudentList = studentList.slice(pageObject.startIndex, pageObject.endIndex + 1);\n\n        const studentItems = currentStudentList.map(studentItem => {\n            return <StudentItem key={studentItem._id} studentItem={studentItem}/>\n        })\n\n        return (\n            <div className=\"container\">\n                <Link to=\"/students/add\" className=\"btn btn-primary\">Add Student</Link>\n\n                <div className=\"search-container\">\n                    <form onSubmit={(e) => {e.preventDefault()}}>\n                        <div className=\"input-group mb-3\">\n                            <div className=\"input-group-prepend\">\n                                <span className=\"input-group-text\">Student Name</span>\n                            </div>\n                                <input type=\"text\" className=\"form-control\" placeholder=\"Student Name\" \n                                id=\"searched_name\"\n                                name=\"searched_name\"\n                                value={searched_name}\n                                onChange={onChange} />\n                            </div>\n                    </form>\n                </div>\n\n                <ul className=\"list-group\">\n                    {studentItems}\n                </ul>\n                <Pagination pageObject={pageObject} changeCurrentPage={this.changeCurrentPage}/>\n            </div>\n        )\n    }\n}\n\nconst mapStateToProps = (state) => {\n    return {\n        students: state.studentReducer.students\n    }\n}\n\nconst mapDispatchToProps = (dispatch) => {\n    return {\n        getAllStudents: () => {dispatch(getAllStudents())}\n    }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(StudentList);\n"]},"metadata":{},"sourceType":"module"}