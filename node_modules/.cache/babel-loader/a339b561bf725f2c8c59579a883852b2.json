{"ast":null,"code":"var _jsxFileName = \"/home/just_a_random_person_to_ignore/React-JS-Student-Management-System-Frontend/src/components/class/ListOfClasses.js\";\nimport React, { Component } from 'react';\nimport { connect } from \"react-redux\";\nimport { getAllClasses } from \"../../actions/classActions\";\nimport ClassItem from \"./ClassItem\";\nimport { Link } from \"react-router-dom\";\nimport { userGetter } from \"../../utils/userGetter\";\nimport paginate from \"../../utils/paginate\";\nimport Pagination from \"../partial/Pagination\";\n\nclass ListOfClasses extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      currentPage: 1,\n      searched_classname: \"\"\n    };\n\n    this.changeCurrentPage = pageNum => {\n      this.setState({\n        currentPage: pageNum\n      });\n    };\n\n    this.onChange = e => {\n      this.setState({\n        [e.target.id]: e.target.value\n      });\n    };\n  }\n\n  async componentDidMount() {\n    let user_id = localStorage.getItem(\"user_id\");\n    let user = await userGetter(user_id);\n    await this.props.getAllClasses();\n\n    if (user.role == \"student\") {\n      this.props.history.push(`/students/details/${user_id}`);\n    }\n\n    if (user.role == \"teacher\") {\n      this.props.history.push(`/teachers/details/${user_id}`);\n    }\n  }\n\n  render() {\n    const {\n      currentPage,\n      searched_classname\n    } = this.state;\n    let classList = this.props.classes; //const {onSearchByName} = this;\n\n    const {\n      onChange\n    } = this;\n\n    if (searched_classname) {\n      classList = classList.filter(item => {\n        return item.class_name.toLowerCase().includes(searched_classname.toLowerCase());\n      });\n    }\n\n    const pageObject = paginate(classList.length, currentPage, 6, 5);\n    const currentClassList = classList.slice(pageObject.startIndex, pageObject.endIndex + 1);\n    const classItems = currentClassList.map(classItem => {\n      return /*#__PURE__*/React.createElement(ClassItem, {\n        classItem: classItem,\n        key: classItem._id,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 20\n        }\n      });\n    });\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Link, {\n      to: \"/classes/add\",\n      className: \"btn btn-primary\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 17\n      }\n    }, \"Add Class\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"search-container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"form\", {\n      onSubmit: e => {\n        e.preventDefault();\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"input-group mb-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"input-group-prepend\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      className: \"input-group-text\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 33\n      }\n    }, \"Class Name\")), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      className: \"form-control\",\n      placeholder: \"Class Name\",\n      id: \"searched_classname\",\n      name: \"searched_classname\",\n      onChange: onChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 33\n      }\n    })))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"list-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 17\n      }\n    }, classItems), /*#__PURE__*/React.createElement(Pagination, {\n      pageObject: pageObject,\n      changeCurrentPage: this.changeCurrentPage,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 17\n      }\n    }));\n  }\n\n}\n\nconst mapStateToProps = state => {\n  return {\n    classes: state.classReducer.classes\n  };\n};\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    getAllClasses: () => {\n      dispatch(getAllClasses());\n    }\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ListOfClasses);","map":{"version":3,"sources":["/home/just_a_random_person_to_ignore/React-JS-Student-Management-System-Frontend/src/components/class/ListOfClasses.js"],"names":["React","Component","connect","getAllClasses","ClassItem","Link","userGetter","paginate","Pagination","ListOfClasses","state","currentPage","searched_classname","changeCurrentPage","pageNum","setState","onChange","e","target","id","value","componentDidMount","user_id","localStorage","getItem","user","props","role","history","push","render","classList","classes","filter","item","class_name","toLowerCase","includes","pageObject","length","currentClassList","slice","startIndex","endIndex","classItems","map","classItem","_id","preventDefault","mapStateToProps","classReducer","mapDispatchToProps","dispatch"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport {connect} from \"react-redux\";\nimport {getAllClasses} from \"../../actions/classActions\";\nimport ClassItem from \"./ClassItem\";\nimport {Link} from \"react-router-dom\";\nimport {userGetter} from \"../../utils/userGetter\";\nimport paginate from \"../../utils/paginate\";\nimport Pagination from \"../partial/Pagination\";\n\nclass ListOfClasses extends Component {\n\n    state = {\n        currentPage: 1,\n        searched_classname: \"\",\n    }\n\n    async componentDidMount(){\n        let user_id = localStorage.getItem(\"user_id\");\n        let user = await userGetter(user_id)\n        await this.props.getAllClasses();\n\n        if (user.role == \"student\") {\n            this.props.history.push(`/students/details/${user_id}`);\n        }\n\n        if (user.role == \"teacher\") {\n            this.props.history.push(`/teachers/details/${user_id}`);\n        }\n    }\n\n    changeCurrentPage = (pageNum) => {\n        this.setState({\n            currentPage: pageNum\n        })\n    }\n\n    /*\n    onSearchByName = (e) => {\n        const search_name = e.target.value;\n\n        console.log(this.props.classes)\n\n        this.props.classes = this.props.classes.filter(item => {\n            return item.class_name.toLowerCase().includes(search_name.toLowerCase());\n        })\n\n        console.log(this.props.classes)\n    }\n    */\n\n    onChange = (e) => {\n        this.setState({\n            [e.target.id]: e.target.value\n        })\n    }\n\n    render() {\n        const {currentPage, searched_classname} = this.state;\n        let classList = this.props.classes;\n        //const {onSearchByName} = this;\n        const {onChange} = this;\n\n        if (searched_classname){\n            classList = classList.filter(item => {\n                return item.class_name.toLowerCase().includes(searched_classname.toLowerCase())\n            })\n        }\n\n        const pageObject = paginate(classList.length, currentPage, 6, 5)\n\n        const currentClassList = classList.slice(pageObject.startIndex, pageObject.endIndex + 1);\n\n        const classItems = currentClassList.map(classItem => {\n            return <ClassItem classItem={classItem} key={classItem._id}/>\n        })\n        \n        return (\n            <div className=\"container\">\n                <Link to=\"/classes/add\" className=\"btn btn-primary\">Add Class</Link>\n\n                <div className=\"search-container\">\n                    <form onSubmit={(e) => {e.preventDefault()}}>\n                        <div className=\"input-group mb-3\">\n                            <div className=\"input-group-prepend\">\n                                <span className=\"input-group-text\">Class Name</span>\n                            </div>\n                                <input type=\"text\" className=\"form-control\" placeholder=\"Class Name\" \n                                id=\"searched_classname\"\n                                name=\"searched_classname\"\n                                onChange={onChange} />\n                            </div>\n                    </form>\n                </div>\n                \n                <div className=\"list-group\">\n                    {classItems}\n                </div>\n                <Pagination pageObject={pageObject} changeCurrentPage={this.changeCurrentPage}/>\n            </div>\n        )\n    }\n}\n\nconst mapStateToProps = (state) => {\n    return {\n        classes: state.classReducer.classes\n    }\n}\n\nconst mapDispatchToProps = (dispatch) => {\n    return {\n        getAllClasses: () => {dispatch(getAllClasses())}\n    }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ListOfClasses);\n"]},"metadata":{},"sourceType":"module"}